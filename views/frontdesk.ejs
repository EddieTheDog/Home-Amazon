<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Front Desk - Home Amazon</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h1>Front Desk - Create Package</h1>

  <form id="packageForm">
    <label>Package ID:</label>
    <input type="text" id="packageId" required><br>

    <label>Recipient Name:</label>
    <input type="text" id="recipient" required><br>

    <label>Delivery Address:</label>
    <input type="text" id="address" required><br>

    <label>City:</label>
    <input type="text" id="city" required><br>

    <label>State:</label>
    <input type="text" id="state" required><br>

    <label>ZIP/Postal Code:</label>
    <input type="text" id="zip" required><br>

    <label>Country:</label>
    <input type="text" id="country" required><br>

    <label>Phone Number:</label>
    <input type="text" id="phone" required><br>

    <label>Email:</label>
    <input type="email" id="email"><br>

    <label>Package Weight (lbs):</label>
    <input type="number" id="weight" step="0.01" required><br>

    <label>Package Dimensions (L x W x H in inches):</label>
    <input type="text" id="dimensions" placeholder="10x5x3" required><br>

    <label>Delivery Speed:</label>
    <select id="deliverySpeed">
      <option value="standard">Standard</option>
      <option value="priority">Priority</option>
      <option value="express">Express</option>
    </select><br>

    <label>Special Instructions / Notes:</label>
    <textarea id="notes"></textarea><br>

    <button type="submit">Create Package & Generate QR Code</button>
  </form>

  <div id="qrCodeContainer" style="margin-top: 20px;"></div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script>
    const form = document.getElementById('packageForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const packageData = {
        packageId: document.getElementById('packageId').value,
        recipient: document.getElementById('recipient').value,
        address: document.getElementById('address').value,
        city: document.getElementById('city').value,
        state: document.getElementById('state').value,
        zip: document.getElementById('zip').value,
        country: document.getElementById('country').value,
        phone: document.getElementById('phone').value,
        email: document.getElementById('email').value,
        weight: document.getElementById('weight').value,
        dimensions: document.getElementById('dimensions').value,
        deliverySpeed: document.getElementById('deliverySpeed').value,
        notes: document.getElementById('notes').value
      };

      // Send package info to server
      const res = await fetch('/api/packages', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(packageData)
      });

      if (res.ok) {
        // Generate QR code for tracking
        const qrContainer = document.getElementById('qrCodeContainer');
        qrContainer.innerHTML = '';
        QRCode.toCanvas(qrContainer, `${window.location.origin}/track?packageId=${packageData.packageId}`, function (error) {
          if (error) console.error(error);
        });

        // Redirect to tracking page
        setTimeout(() => {
          window.location.href = `/track?packageId=${packageData.packageId}`;
        }, 1000);
      } else {
        alert('Error creating package');
      }
    });
  </script>
</body>
</html>
