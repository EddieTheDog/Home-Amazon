<!DOCTYPE html>
<html>
<head>
  <title>Warehouse Dashboard</title>
  <link rel="stylesheet" href="/style.css">
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <h1>ğŸ­ Warehouse Dashboard</h1>

  <table id="packagesTable" border="1">
    <thead>
      <tr>
        <th>Package ID</th>
        <th>Recipient</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <% packages.forEach(pkg => { %>
        <tr id="pkg-<%= pkg.id %>">
          <td><%= pkg.id %></td>
          <td><%= pkg.recipient %></td>
          <td><%= pkg.status %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <script>
    const socket = io();

    socket.on('scannedPackage', pkg => {
      const row = document.getElementById(`pkg-${pkg.id}`);
      if(row){
        row.cells[2].innerText = pkg.status || 'Scanned';
        row.style.backgroundColor = '#a0ffa0';
        setTimeout(() => row.style.backgroundColor = '', 1000);
      }
    });
  </script>
</body>
</html>
